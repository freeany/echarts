<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        body,
        html,
        #allmap {
            width: 100%;
            height: 100%;
            overflow: hidden;
            margin: 0;
            font-family: "微软雅黑";
        }
    </style>
    <title>地图展示</title>
</head>

<body>
    <div id="allmap"></div>
</body>

</html>
<script type="text/javascript">
    function init() {
        var map = new BMapGL.Map('allmap');
        var point = new BMapGL.Point(116.316833, 39.998877);
        map.centerAndZoom(point, 10);
        map.enableScrollWheelZoom(true);
        map.setMapType(BMAP_NORMAL_MAP)
        map.setHeading(0)
        map.setTilt(0)
        // map.setMinZoom(8) // 设置缩放zoom的最小值
        // map.setMaxZoom(12) // 设置缩放zoom的最大值
        // 添加zoomControl
        var zoomCtrl = new BMapGL.ZoomControl({
            anchor: BMAP_ANCHOR_BOTTOM_LEFT,
            offset: new BMapGL.Size(100, 0) // 设置偏移量， 可以用css设置，但是不精确。BMap为我们提供了这个方法
        });  // 添加比例尺控件
        map.addControl(zoomCtrl);
        var scaleCtrl = new BMapGL.ScaleControl({
            anchor: BMAP_ANCHOR_TOP_LEFT,
            offset: new BMapGL.Size(100, 10)
        });  // 添加比例尺控件
        map.addControl(scaleCtrl);
        // 监听zoom缩放事件
        map.addEventListener('zoomstart', function () {
            console.log(map.getZoom());
        })
        // 有问题。。。。啊
        map.addEventListener('zoomend', function () {
            setTimeout(() => {
                console.log(map.getZoom());
            }, 1000);
        })
    }

    function loadScript() {
        var script = document.createElement("script");
        script.src = "https://api.map.baidu.com/api?type=webgl&v=1.0&ak=MBABYv1BzdKnzAsynglfLpfDuhCUH3Wv&callback=init"
        document.body.appendChild(script);
    }

    window.onload = loadScript;
</script>